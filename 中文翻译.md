
---

**数据挖掘：关联规则挖掘**


---

**数据挖掘**

资料来源：《福布斯》

分析大量数据集以发现模式并提取有用信息的过程。

**为什么“挖掘”数据？**

- 大量数据正在被生成并存储（例如，网络数据、电子商务、银行/信用卡交易、零售等）。
- 计算机价格低廉且运行快速。
- 通过“挖掘”获得的信息和知识对许多应用来说是宝贵且有用的。

**啤酒与尿布：不可能的关联**

资料来源：https://www.linkedin.com/pulse/tale-beer-diapers-ibeukp

- 1992年，一位行业顾问分析了25家Osco Drug商店的120万购物篮，发现顾客在下午5点到7点之间会购买啤酒和尿布。
- 将啤酒和尿布放在同一个货架上；对尿布进行促销活动，同时提高啤酒的价格。
- 这并不是数据挖掘或任何高级分析的例子——只是使用SQL查询来寻找关联！

**购物篮分析**

商品：面包、果酱、笔记本电脑、耳机

为了发现购买模式（商品之间的关联）

资料来源：《华尔街日报》

- 巧克力包装即将过期
- 巧克力与芭比娃娃之间的关联
- 运行促销活动：购买1个芭比娃娃，巧克力棒享受5折优惠

**频繁项集**

- 项集
  - 一组商品，例如：{牛奶，尿布，啤酒}
- 支持度计数
  - 项集出现的频率
  - 例如，Freq({牛奶，尿布，啤酒}) = 2
- 支持度
  - 包含项集的交易比例
  - 例如，Support({牛奶，尿布，啤酒}) = 2/5
- 频繁项集
  - 支持度值大于阈值的项集

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

**关联规则**

- 关联规则
  - 如果-那么规则，X → Y，其中X和Y是项集
  - 如果：前件；那么：后件（前件是数据中发现的商品。后件是与前件一起发现的商品。）
  - 例如，{牛奶，尿布} → {啤酒}
- 规则评估指标
  - 支持度（s）：包含X和Y的交易比例，即s(X → Y) = Freq(X ∪ Y) / |T|
  - 置信度（c）：在包含X的交易中，Y出现的频率，即c(X → Y) = Freq(X ∪ Y) / Freq(X)，也可以理解为给定X时Y的概率

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

**关联规则**

- 示例：{牛奶，尿布} → {啤酒}
- 支持度 = Freq({牛奶，尿布，啤酒}) / |T| = 2/5 = 0.40
- 置信度 = Freq({牛奶，尿布，啤酒}) / Freq({牛奶，尿布}) = 2/3 = 0.67

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

**关联规则挖掘**

- 问题：给定一个交易数据集T = {T1, T2, …, Tn}，找出所有支持度和置信度大于最小阈值的规则X → Y。

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

**关联规则挖掘**

- 挑战：如何生成关联规则？
- 暴力方法：1）列出所有可能的规则，2）计算支持度和置信度，3）根据阈值删除规则。但这种方法计算成本过高！
- 更有效的方法是挖掘频繁项集，基于这些项集生成具有一定置信度的规则。
- 关键问题：如何挖掘频繁项集？

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

**频繁项集挖掘**

交易编号（TID）| 商品
---|---
1 | 面包，牛奶
2 | 面包，尿布，啤酒，鸡蛋
3 | 牛奶，尿布，啤酒，可乐
4 | 面包，牛奶，尿布，啤酒
5 | 面包，牛奶，尿布，可乐

- Apriori算法
  - 识别频繁项，并逐步扩展到更大的项集。
  - 缺点：1）候选项集数量多；2）需要多次扫描数据库。
- 更先进的方法：FP-Growth算法

项集 | 支持度
---|---
面包 | 4
牛奶 | 4
尿布 | 4
啤酒 | 3
可乐 | 2
鸡蛋 | 1

项集 | 支持度
---|---
面包，牛奶 | 3
面包，尿布 | 3
牛奶，尿布 | 3
尿布，啤酒 | 3
…

**进一步阅读**

- Han, J., Kamber, M., 和 Pei, J.，《数据挖掘：概念与技术》，第3版。美国加利福尼亚州旧金山：Morgan Kaufmann Publishers Inc.，2011年。ISBN：978-0-12-381479-1。

**快乐编程**

---
